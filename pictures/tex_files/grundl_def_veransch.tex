\documentclass[tikz]{standalone}
\input{image_header}
\input{gate_header}
\usepackage{rotating}
\begin{document}
\begin{tikzpicture}


\begin{scope}[yscale=-1,xscale=1]
 


\node[fill=red, outer sep=0pt, and gate US, draw, logic gate inputs=nn, rotate=90, thick] at (1,0) (j0){};
\node[fill=green, outer sep=0pt, or gate US, draw, logic gate inputs=nn, rotate=90, thick] at (2,2) (j1){};
\node[fill=green, outer sep=0pt, or gate US, draw, logic gate inputs=ni, rotate=90, thick] at (0,2) (j2){};
\node[fill=red, outer sep=0pt, and gate US, draw, logic gate inputs=in, rotate=90, thick] at (-1,0) (j3){};
\node[fill=red, outer sep=0pt, and gate US, draw, logic gate inputs=in, rotate=90, thick] at (0,-2) (j4){};


\node (i1) at (-0.1,3){3};
\node (i3) at (1,3){4};
\node (i4) at (2.1,3){5};

\node (i5) at (-1.1,3){1};
\node (i7) at (-0.9,3){2};


\draw[-, thick] (j1.output) -- (j0.input 2);
\draw[-, thick] (j2.output) -- (j0.input 1);

\draw[-, thick] (i1) -- (j2.input 1);
\draw[-, thick] (i3) -- (j2.input 2);

\draw[-, thick] (i3) -- (j1.input 1);
\draw[-, thick] (i4) -- (j1.input 2);


\draw[-, thick] (i7) -- (j3.input 2);
\draw[-, thick] (i5) -- (j3.input 1);

\draw[-, thick] (j3.output) -- (j4.input 1);
\draw[-, thick] (j0.output) -- (j4.input 2);


\draw[->, thick] (3.5,0) -- (4.5,0);






\node[fill=red, outer sep=0pt, and gate US, draw, logic gate inputs=nn, rotate=90, thick] at (5,0) (j10){};
\node[fill=red,outer sep=0pt, thick, circle, draw, inner sep = 1.5pt] at (5 - 0.1,0.25) (){};
\node[fill=red, outer sep=0pt, and gate US, draw, logic gate inputs=nn, rotate=90, thick] at (6.5,-2) (j13){};
\node[fill=red,outer sep=0pt, thick, circle, draw, inner sep = 1.5pt] at (6.5- 0.1,-2+0.25) (){};

\def\x{6.3}
\node[fill=green, outer sep=0pt, or gate US, draw, logic gate inputs=nn, rotate=90, thick, scale=0.8] at (\x  + .25,0.5) (oaio){};
\node[fill=green, outer sep=0pt, or gate US, draw, logic gate inputs=nn, rotate=90, thick, scale=0.8] at (\x  + .75,0.5) (oaio2){};
\node[fill=red, outer sep=0pt, and gate US, draw, logic gate inputs=nn, rotate=90, thick, scale=0.8] at (\x  + .5, -0.15) (oaia){};
\node[fill=red,outer sep=0pt, thick, circle, draw, inner sep = 1.5pt] at (\x  + 0.43,0.7) (){};
\node[fill=red, outer sep=0pt, buffer gate US, draw, logic gate inputs=nn, rotate=90, thick, scale=0.5] at (\x  + .5, 0.9) (buffer){};


\node (i11) at (4.9,3){1};
\node (i12) at (6.8,3){4};
\node (i13) at (5.1,3){2};
\node (i16) at (7.1,3){5};
\node (i17) at (6.45,3){3};


\draw[-, thick] (i13) -- (j10.input 2);
\draw[-, thick] (i11) -- (j10.input 1);




\draw[-, thick] (i16) -- (oaio2.input 2);
\draw[-, thick] (i17) -- (oaio.input 1);
\draw[-, thick] (i12) -- (buffer);


\draw[-, thick] (j10.output) -- (j13.input 1);

\draw[-, thick] (oaia.output) -- (j13.input 2);



\end{scope}

%Text and labels
\node at (1,0) (j0){$v$};
\node at (-1,0) (j3){$w$};
\node at (0,2) (j4){$o$};


%\node[text width=2.5cm] at (3.6,-2) {\tiny Kandidaten $x,y$: die bereits vorhandenen Gates und Inputs };

\node[text width=4cm] at (3,-0.3) {\tiny {\bf Match auf $v$:} 
\begin{itemize}
	\item Gate: MUX
	\item Inputs: 3,4,5
	\item $inv(inp) = non\_inv$ $ \forall \text{ Inputs }  inp $
\end{itemize} };

\node[text width=4.5cm] at (2.3,2) {\tiny {\bf Kandidat auf $o$:}
 \begin{itemize}
	\item Match: ANDN Gate mit $non\_inv$ Inputs $w,v$
	\item Inputkandidaten: \\ ANDN Kandidat von $w$ \\ MUX Kandidat von $v$
\end{itemize} };

\end{tikzpicture}
\end{document}